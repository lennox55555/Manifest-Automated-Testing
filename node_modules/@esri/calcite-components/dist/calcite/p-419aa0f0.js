/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */
import{k as n,q as t,c as e}from"./p-45d8c8ac.js";const c="calciteInternalLabelClick",o="calciteInternalLabelConnected",s="calciteInternalLabelDisconnected",a="calcite-label",i=new WeakMap,u=new WeakMap,r=new WeakMap,l=new WeakMap,f=new WeakSet;function d(n){const d=(n=>{const{id:c}=n,o=c&&t(n,{selector:`${a}[for="${c}"]`});if(o)return o;const s=e(n,a);return!s||function(n,t){let e;const c="custom-element-ancestor-check",o=c=>{c.stopImmediatePropagation();const o=c.composedPath();e=o.slice(o.indexOf(t),o.indexOf(n))};return n.addEventListener(c,o,{once:!0}),t.dispatchEvent(new CustomEvent(c,{composed:!0,bubbles:!0})),n.removeEventListener(c,o),e.filter((e=>e!==t&&e!==n)).filter((n=>n.tagName?.includes("-"))).length>0}(s,n)?null:s})(n.el);if(u.has(d)&&d===n.labelEl||!d&&f.has(n))return;const m=w.bind(n);if(d){n.labelEl=d;const t=i.get(d)||[];t.push(n),i.set(d,t.sort(h)),u.has(n.labelEl)||(u.set(n.labelEl,p),n.labelEl.addEventListener(c,p)),f.delete(n),document.removeEventListener(o,r.get(n)),l.set(n,m),document.addEventListener(s,m)}else f.has(n)||(m(),document.removeEventListener(s,l.get(n)))}function m(n){if(f.delete(n),document.removeEventListener(o,r.get(n)),document.removeEventListener(s,l.get(n)),r.delete(n),l.delete(n),!n.labelEl)return;const t=i.get(n.labelEl);1===t.length&&(n.labelEl.removeEventListener(c,u.get(n.labelEl)),u.delete(n.labelEl)),i.set(n.labelEl,t.filter((t=>t!==n)).sort(h)),n.labelEl=null}function h(t,e){return n(t.el,e.el)?-1:1}function k(n){return n.label||n.labelEl?.textContent?.trim()||""}function p(n){const t=n.detail.sourceEvent.target,e=i.get(this),c=e.find((n=>n.el===t));if(e.includes(c))return;const o=e[0];o.disabled||o.onLabelClick(n)}function b(){f.has(this)&&d(this)}function w(){f.add(this);const n=r.get(this)||b.bind(this);r.set(this,n),document.addEventListener(o,n)}export{s as a,d as c,m as d,k as g,o as l}