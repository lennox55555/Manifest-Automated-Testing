{"version":3,"sources":["../../src/services/manifester.js"],"names":[],"mappings":"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","file":"manifester.js","sourcesContent":["const express = require('express'); // Import the Express module\nconst app = express(); // Create an Express application\nconst url = require('url'); // Import the URL module\nconst request = require('request-promise'); // Import the request-promise module\n\nconst gsheetkey = 'AIzaSyDbKq9njfiQa3UDGzRaaG0YaQOT0kYNoFQ'; // Google Sheets API key\nconst aprsfikey = '161937.xJdpU4VkxgfJ2EA'; // APRS.fi API key\n\nconst port = 3000;\napp.listen(port, () => {\n\tconsole.log(`Server running at http://localhost:${port}/`);\n});\n\napp.get('/', (req, res) => {\n\tlet Manifester = {\n\t\tg: null,\n\t\tr: null,\n\t\tgetSmapGeo: function (id) {\n\t\t\treturn request({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turi: 'https://raw.githubusercontent.com/hock/smapdata/master/data/' + id + '.geojson',\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t\tgetSmapGraph: function (id) {\n\t\t\treturn request({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turi: 'https://raw.githubusercontent.com/hock/smapdata/master/data/' + id + '.json',\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t\tgetGoogleOverview: function (id) {\n\t\t\treturn request({\n\t\t\t\turi: 'https://sheets.googleapis.com/v4/spreadsheets/' + id + '/values/Overview?key=' + gsheetkey,\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t\tgetGoogleList: function (id) {\n\t\t\treturn request({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turi: 'https://sheets.googleapis.com/v4/spreadsheets/' + id + '/values/List?key=' + gsheetkey,\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t\tgetMarineTrafficOverview: function () {\n\t\t\treturn request({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turi: 'http://services.marinetraffic.com/api/exportvessels/cc503f48eb2c8e49549cc56de3c7059c4b042931/timespan:4/protocol:json',\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t\tgetAprsFi: function (vid) {\n\t\t\treturn request({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turi: 'https://api.aprs.fi/api/get?name=' + vid + '&what=loc&apikey=' + aprsfikey + '&format=json',\n\t\t\t\theaders: {\n\t\t\t\t\t'User-Agent': 'manifest/0.2 (+https://manifest.supplystudies.com/)',\n\t\t\t\t},\n\t\t\t\tjson: true,\n\t\t\t});\n\t\t},\n\t};\n\n\tlet url_parts = url.parse(req.url, true);\n\tlet query = url_parts.query;\n\n\tif (query.type == 'smap' || query.type == 'gsheet') {\n\t\tlet gprocessor = null;\n\t\tlet rprocessor = null;\n\n\t\tif (query.type == 'smap') {\n\t\t\tgprocessor = Manifester.getSmapGeo;\n\t\t\trprocessor = Manifester.getSmapGraph;\n\t\t}\n\t\tif (query.type == 'gsheet') {\n\t\t\tgprocessor = Manifester.getGoogleOverview;\n\t\t\trprocessor = Manifester.getGoogleList;\n\t\t}\n\n\t\tgprocessor(query.id)\n\t\t\t.then(function (result) {\n\t\t\t\tManifester.g = result;\n\t\t\t\trprocessor(query.id)\n\t\t\t\t\t.then(function (result) {\n\t\t\t\t\t\tManifester.r = result;\n\t\t\t\t\t\tres.statusCode = 200;\n\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\t\t\tconsole.log('done');\n\t\t\t\t\t\tres.end('{\"g\": ' + JSON.stringify(Manifester.g) + ', \"r\": ' + JSON.stringify(Manifester.r) + '}');\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\tconsole.log('failed');\n\n\t\t\t\t\t\tres.statusCode = 404;\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\t\t\tres.end('{\"not found\"}');\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tconsole.log('failed');\n\n\t\t\t\tres.statusCode = 404;\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\tres.end('{\"not found\"}');\n\t\t\t});\n\t}\n\tif (query.type == 'proxy-marine') {\n\t\tManifester.getMarineTrafficOverview()\n\t\t\t.then(function (result) {\n\t\t\t\tres.statusCode = 200;\n\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\tconsole.log('success');\n\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tconsole.log('failed');\n\n\t\t\t\tres.statusCode = 404;\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\tres.end('{\"not found\"}');\n\t\t\t});\n\t}\n\tif (query.type == 'aprsfi') {\n\t\tManifester.getAprsFi(query.id)\n\t\t\t.then(function (result) {\n\t\t\t\tres.statusCode = 200;\n\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\n\t\t\t\tconsole.log('success');\n\t\t\t\tres.end(JSON.stringify(result));\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tconsole.log('failed');\n\n\t\t\t\tres.statusCode = 404;\n\t\t\t\tres.setHeader('Access-Control-Allow-Origin', '*');\n\t\t\t\tres.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n\t\t\t\tres.setHeader('Access-Control-Allow-Methods', 'GET');\n\t\t\t\tres.setHeader('Content-Type', 'application/json');\n\t\t\t\tres.end('{\"error: \"RESOURCE NOT FOUND\"}');\n\t\t\t});\n\t}\n});\n\n"]}